user                            nginx;	# this should be changed to the name of the user if one is created
worker_processes                auto;	# this will be determined automatically by the number of cores

error_log	/var/log/nginx/error.log warn;
#pid		/var/run/nginx/nginx.pid; 	# this permits use of /etc/init.d/nginx reload|restart|stop|start

events {
	worker_connections          1024;
}

http {
	sendfile on;

	server {
		listen			80;
		listen			[::]:80;

		root			/www/localhost;
		server_name		localhost_http;
		rewrite 		^/(.*)$ https://192.168.64.24:443/$1 permanent;

		index			index.html index.php;

		location / {
			try_files $uri $uri/ =404;
		}
	}

	server {
		listen			443 ssl;
		listen			[::]:443 ssl;

		root			/www/localhost;
		server_name		localhost_https;

		ssl_certificate		/etc/nginx/ssl/certs/nginx.crt;
		ssl_certificate_key	/etc/nginx/ssl/private/nginx.key;

		index			index.html index.php;

		location / {
			try_files $uri $uri/ =404;
		}
	}
}
